<%- include('../layouts/userLayouts/header') %>
<%- include('../layouts/userLayouts/navbar') %>


	<!--End Mobile Menu-->
    
    <!--Body Content-->
    <div id="page-content">
    	<!--Page Title-->
    	<div class="page section-header text-center">
			<div class="page-title">
        		<div class="wrapper"><h1 class="page-width">Profile</h1></div>
      		</div>
		</div>
        <!--End Page Title-->
        
        <!-- Code by chatgpt start-->


        <section style="padding-top: 150px; padding-bottom: 150px;">
          <div style="max-width: 1200px; margin: 0 auto;">
              <div style="display: flex;">
                <div style="flex: 0 0 33.33%; padding: 15px;">
                  <div style="background-color: #f8f9fa; border: 1px solid #dee2e6; border-radius: 5px;">
                      <ul style="list-style-type: none; padding: 0; margin: 0;">
                          <li>
                              <a style="display: block; padding: 20px; font-size: 18px; text-decoration: none; color: black; background-color: transparent; border: 1px solid #dee2e6; border-radius: 5px;" 
                                 id="dashboard-tab" data-bs-toggle="tab" href="/profile" role="tab" aria-controls="dashboard" aria-selected="false" 
                                 onclick="setActive(this)"><i class="fi-rs-settings-sliders" style="margin-right: 10px;"></i>Profile</a>
                          </li>
                          <li>
                              <a style="display: block; padding: 20px; font-size: 18px; text-decoration: none; color: black; background-color: transparent; border: 1px solid #dee2e6; border-radius: 5px;" 
                                 id="orders-tab" data-bs-toggle="tab" href="#orders" role="tab" aria-controls="orders" aria-selected="false" 
                                 onclick="setActive(this)"><i class="fi-rs-shopping-bag" style="margin-right: 10px;"></i>Orders</a>
                          </li>
                          
                          <li>
                              <a style="display: block; padding: 20px; font-size: 18px; text-decoration: none; color: black; background-color: transparent; border: 1px solid #dee2e6; border-radius: 5px;" 
                                 id="address-tab" data-bs-toggle="tab" href="/address" role="tab" aria-controls="address" aria-selected="true" 
                                 onclick="setActive(this)"><i class="fi-rs-marker" style="margin-right: 10px;"></i>My Address</a>
                          </li>
                          <li>
                              <a style="display: block; padding: 20px; font-size: 18px; text-decoration: none; color: black; background-color: transparent; border: 1px solid #dee2e6; border-radius: 5px;" 
                                 id="account-detail-tab" data-bs-toggle="tab" href="/editProfile" role="tab" aria-controls="account-detail" aria-selected="true" 
                                 onclick="setActive(this)"><i class="fi-rs-user" style="margin-right: 10px;"></i>Edit Profile</a>
                          </li>
                          <li>
                              <a style="display: block; padding: 20px; font-size: 18px; text-decoration: none; color: black; background-color: transparent; border: 1px solid #dee2e6; border-radius: 5px;" 
                                 href="/logout"><i class="fi-rs-sign-out" style="margin-right: 10px;"></i>Logout</a>
                          </li>
                      </ul>
                  </div>
              </div>

              <div class="address" style="border: 2px light black; height: auto; width: 800px;">
                <div style="background-color: #f8f9fa; padding: 15px; display: flex; ">
                  <h1 style="margin: 0;">My Address</h1>
                  <div style="margin-left: auto;">
                    <a href="/addAddress" class="btn mb-3">+Add Address</a>
                  </div>
                </div>

                <div id="sampleId">
                    <% addressData.forEach(address=>{ %>
                        <div id="address-container" style="border: 2px solid lightgray; height: auto; width: 600px;">
                          <div class="col-12 col-sm-12 col-md-12 col-lg-12 ",style="width:25px">
                            <div style="display: flex; ">
                                <div>
                                    <label for="FirstName" style="color: black; font-size:20px"><%= address.name %></label><br>
                                    <label for="FirstName" style="color: black; font-size:20px"><%= address.address %>,</label>
                                    <label for="FirstName" style="color: black; font-size:20px"><%= address.pincode %></label>
        
                                    
                                    <label for="FirstName" style="color: black; font-size:20px"><%= address.district %>,</label>
                                    <label for="FirstName" style="color: black; font-size:20px"><%= address.state %></label><br>
                                    
                                    
                                    <label for="FirstName" style="color: black; font-size:20px"><%= address.phone %>,</label>
                                    <label for="FirstName" style="color: black; font-size:20px"><%= address.altPhone %></label><br>
                                    <label for="FirstName" style="color: black; font-size:20px"><%= address.landMark %></label>
                                    
                                    
        
                                </div> 
                               
                                
                                  
                            </div>
                            <div style="margin-left: auto;">
                              <a href="/editAddress?id=<%= address._id %>" class="btn mb-3">Edit</a>
                            </div>
                            
                              <button 
                            type="button" class="btn btn-danger" 
                            style="position: absolute; top: 5px; right: 5px; padding: 5px 8px; background-color: red;" 
                            onclick="removeAddress('<%= address._id %>')">
                        
                               X
                            </button>
                            
                            
                          
                            
                          </div>
                          
                        </div>
                      <% }) %>
                </div>
               
                
                
                
            </div>
            
                  
           

        </div>
      </div>  
    </section>


    <!-- Modal start  -->
      



       <!-- Modal end  -->
    



        <!-- Code by chatgpt end-->



    <!--End Body Content-->
    
    <!--Footer-->
    <footer id="footer">
        <div class="newsletter-section">
            <div class="container">
                <div class="row">
                        <div class="col-12 col-sm-12 col-md-12 col-lg-7 w-100 d-flex justify-content-start align-items-center">
                            <div class="display-table">
                                <div class="display-table-cell footer-newsletter">
                                    <div class="section-header text-center">
                                        <label class="h2"><span>sign up for </span>newsletter</label>
                                    </div>
                                    <form action="#" method="post">
                                        <div class="input-group">
                                            <input type="email" class="input-group__field newsletter__input" name="EMAIL" value="" placeholder="Email address" required="">
                                            <span class="input-group__btn">
                                                <button type="submit" class="btn newsletter__submit" name="commit" id="Subscribe"><span class="newsletter__submit-text--large">Subscribe</span></button>
                                            </span>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-sm-12 col-md-12 col-lg-5 d-flex justify-content-end align-items-center">
                            <div class="footer-social">
                                <ul class="list--inline site-footer__social-icons social-icons">
                                    <li><a class="social-icons__link" href="#" target="_blank" title="Belle Multipurpose Bootstrap 4 Template on Facebook"><i class="icon icon-facebook"></i></a></li>
                                    <li><a class="social-icons__link" href="#" target="_blank" title="Belle Multipurpose Bootstrap 4 Template on Twitter"><i class="icon icon-twitter"></i> <span class="icon__fallback-text">Twitter</span></a></li>
                                    <li><a class="social-icons__link" href="#" target="_blank" title="Belle Multipurpose Bootstrap 4 Template on Pinterest"><i class="icon icon-pinterest"></i> <span class="icon__fallback-text">Pinterest</span></a></li>
                                    <li><a class="social-icons__link" href="#" target="_blank" title="Belle Multipurpose Bootstrap 4 Template on Instagram"><i class="icon icon-instagram"></i> <span class="icon__fallback-text">Instagram</span></a></li>
                                    <li><a class="social-icons__link" href="#" target="_blank" title="Belle Multipurpose Bootstrap 4 Template on Tumblr"><i class="icon icon-tumblr-alt"></i> <span class="icon__fallback-text">Tumblr</span></a></li>
                                    <li><a class="social-icons__link" href="#" target="_blank" title="Belle Multipurpose Bootstrap 4 Template on YouTube"><i class="icon icon-youtube"></i> <span class="icon__fallback-text">YouTube</span></a></li>
                                    <li><a class="social-icons__link" href="#" target="_blank" title="Belle Multipurpose Bootstrap 4 Template on Vimeo"><i class="icon icon-vimeo-alt"></i> <span class="icon__fallback-text">Vimeo</span></a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
            </div>    
        </div>
        <div class="site-footer">
        	<div class="container">
     			<!--Footer Links-->
            	<div class="footer-top">
                	<div class="row">
                    	<div class="col-12 col-sm-12 col-md-3 col-lg-3 footer-links">
                        	<h4 class="h4">Quick Shop</h4>
                            <ul>
                            	<li><a href="#">Women</a></li>
                                <li><a href="#">Men</a></li>
                                <li><a href="#">Kids</a></li>
                                <li><a href="#">Sportswear</a></li>
                                <li><a href="#">Sale</a></li>
                            </ul>
                        </div>
                        <div class="col-12 col-sm-12 col-md-3 col-lg-3 footer-links">
                        	<h4 class="h4">Informations</h4>
                            <ul>
                            	<li><a href="#">About us</a></li>
                                <li><a href="#">Careers</a></li>
                                <li><a href="#">Privacy policy</a></li>
                                <li><a href="#">Terms &amp; condition</a></li>
                                <li><a href="#">My Account</a></li>
                            </ul>
                        </div>
                        <div class="col-12 col-sm-12 col-md-3 col-lg-3 footer-links">
                        	<h4 class="h4">Customer Services</h4>
                            <ul>
                            	<li><a href="#">Request Personal Data</a></li>
                                <li><a href="#">FAQ's</a></li>
                                <li><a href="#">Contact Us</a></li>
                                <li><a href="#">Orders and Returns</a></li>
                                <li><a href="#">Support Center</a></li>
                            </ul>
                        </div>
                        <div class="col-12 col-sm-12 col-md-3 col-lg-3 contact-box">
                        	<h4 class="h4">Contact Us</h4>
                            <ul class="addressFooter">
                            	<li><i class="icon anm anm-map-marker-al"></i><p>55 Gallaxy Enque,<br>2568 steet, 23568 NY</p></li>
                                <li class="phone"><i class="icon anm anm-phone-s"></i><p>(440) 000 000 0000</p></li>
                                <li class="email"><i class="icon anm anm-envelope-l"></i><p>sales@yousite.com</p></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <!--End Footer Links-->
                <hr>
                <div class="footer-bottom">
                	<div class="row">
                    	<!--Footer Copyright-->
	                	<div class="col-12 col-sm-12 col-md-6 col-lg-6 order-1 order-md-0 order-lg-0 order-sm-1 copyright text-sm-center text-md-left text-lg-left"><span></span> <a href="templateshub.net">Templates Hub</a></div>
                        <!--End Footer Copyright-->
                        <!--Footer Payment Icon-->
                        <div class="col-12 col-sm-12 col-md-6 col-lg-6 order-0 order-md-1 order-lg-1 order-sm-0 payment-icons text-right text-md-center">
                        	<ul class="payment-icons list--inline">
                        		<li><i class="icon fa fa-cc-visa" aria-hidden="true"></i></li>
                                <li><i class="icon fa fa-cc-mastercard" aria-hidden="true"></i></li>
                                <li><i class="icon fa fa-cc-discover" aria-hidden="true"></i></li>
                                <li><i class="icon fa fa-cc-paypal" aria-hidden="true"></i></li>
                                <li><i class="icon fa fa-cc-amex" aria-hidden="true"></i></li>
                                <li><i class="icon fa fa-credit-card" aria-hidden="true"></i></li>
                            </ul>
                        </div>
                        <!--End Footer Payment Icon-->
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!--End Footer-->
    <!--Scoll Top-->
    <span id="site-scroll"><i class="icon anm anm-angle-up-r"></i></span>
    <!--End Scoll Top-->
    
     <!-- Including Jquery -->
     <script src="assets/js/vendor/jquery-3.3.1.min.js"></script>
     <script src="assets/js/vendor/jquery.cookie.js"></script>
     <script src="assets/js/vendor/modernizr-3.6.0.min.js"></script>
     <script src="assets/js/vendor/wow.min.js"></script>
     <!-- Including Javascript -->
     <script src="assets/js/bootstrap.min.js"></script>
     <script src="assets/js/plugins.js"></script>
     <script src="assets/js/popper.min.js"></script>
     <script src="assets/js/lazysizes.js"></script>
     <script src="assets/js/main.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</div>
</body>


<script>

function removeAddress(id){
  
  fetch("/removeAddress", {
  method: "DELETE",
  headers: {
    "Content-Type": "application/json",
  },
  body: JSON.stringify({ id: id }),
})
.then(response => {
  if (!response.ok) {
    throw new Error(`Error: ${response.status} ${response.statusText}`);
  }
  return response.json(); // Assuming the server returns JSON
})
.then(data => {
  console.log("Success:", data);
//   setTimeout(function() {
//     removeAddressMessage("Success", data.message, "success");
// }, 1000);
  window.location.reload(); 
//   document.getElementById("address-container").textContent=null
})
.catch(error => {
  console.error("Error:", error);
});
}





//for id pass for edit address
// function editAddress(id){
//   console.log("babu",id)
//   fetch("/editAddress", {
//   method: "POST",
//   headers: {
//     "Content-Type": "application/json",
//   },
//   body: JSON.stringify({ id: id }),
// })
// }


function removeAddressMessage(heading,message,sign){
    
    Swal.fire({
                       title: heading,
                       text: message,
                       icon: sign, 
                       confirmButtonText: "OK",
                       toast: true,  
                       position: 'top-end',
                       timer: 3000,  
                       timerProgressBar: true,
                       background: '',
                       
                       });
    
}


</script>


</html>